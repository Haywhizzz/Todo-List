(()=>{"use strict";function e(e,t,n,s){const d=document.createElement(e);return t&&(d.id=t),n&&n.forEach((e=>d.classList.add(e))),s&&(d.innerText=s),d}const t=document.querySelector("#projects .card");class n{constructor(e){this.title=e,this.id=Math.random().toString().split(".").join(""),this.tasks=[]}render(){const n=e("div",this.id,["project"],null),s=e("p",null,null,this.title),i=e("img",null,["delete"],null);i.src="./img/delete.svg",i.addEventListener("click",(()=>{this.delete()})),n.appendChild(s),n.appendChild(i),t.appendChild(n),n.addEventListener("click",(()=>{d=this,d.active=!1,this.renderTasks(),document.querySelectorAll(".project").forEach((e=>{e.classList.value="project"})),document.querySelectorAll(".delete").forEach((e=>{e.src="./img/delete.svg"})),n.classList.value.includes("active")||(n.classList.add("active"),i.src="./img/delete-white.svg")}))}delete(){s=s.filter((e=>e.id!==this.id)),n.renderProjects()}renderTasks(){document.querySelector("#task-container").innerHTML="",this.tasks.forEach((e=>e.render()))}static renderProjects(){t.innerHTML="",s.forEach((e=>e.render()))}static setCurrentProject(e){d=e}}let s=[new n("Test Project")],d=s[0];const i=document.querySelector("#task-container"),l=document.getElementById("form-project"),r=document.querySelector(".feedback"),a=(e,t)=>{r.classList.add("showItem",`alert-${t}`),r.innerHTML=`<p>${e}</p>`,setTimeout((()=>{r.classList.remove("showItem",`alert-${t}`)}),3e3)};l.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("project-name");if(""===t.value)return void a("project title cannot be empty","danger");const d=new n(t.value);s.push(d),t.value="",n.renderProjects(),n.setCurrentProject(d);const i=document.querySelectorAll(".project");i[i.length-1].classList.add("active"),i[i.length-1].lastChild.src="./img/delete-white.svg"})),document.getElementById("form-task").addEventListener("submit",(t=>{t.preventDefault();const n=document.getElementById("task-name");if(""===n.value)return void a("task-title cannot be empty","danger");const s=document.getElementById("task-description");if(""===s.value)return void a("task-description cannot be empty","danger");const l=document.getElementById("task-date");if(""===l.value)return void a("Please choose a deadline","danger");const r=document.getElementById("task-priority"),c=new class{constructor(e,t,n,s,d){this.title=e,this.description=t,this.date=n,this.priority=s,this.status=d}render(){const t=e("div",this.id,["task"],null),n=e("div",null,["task-name"],null),s=e("div",null,["task-descrption"],null),d=e("input",null,["checkbox"],null);d.type="checkbox";const l=e("p",null,null,this.title),r=e("p",null,null,this.description),a=e("div",null,["task-info"],null),c=e("p",null,null,this.date),o=e("div",null,["badge"],this.priority),u=e("img",null,["delete"],null);u.src="./img/delete.svg";const p=e("img",null,["edit"],null);p.src="./img/edit.svg",p.addEventListener("click",(()=>{this.edit()})),n.appendChild(d),n.appendChild(l),s.appendChild(d),s.appendChild(r),a.appendChild(c),a.appendChild(o),a.appendChild(u),a.appendChild(p),t.appendChild(n),t.appendChild(s),t.appendChild(a),i.appendChild(t),d.addEventListener("change",(()=>{l.classList.toggle("done")})),i.appendChild(t),d.addEventListener("change",(()=>{r.classList.toggle("done")})),"urgent"===this.priority&&o.classList.add("urgent"),u.addEventListener("click",(()=>{this.delete()}))}delete(){d.tasks=d.tasks.filter((e=>e.id!==this.id)),d.renderTasks()}edit(){const e=document.getElementById("myModal");e.style.display="flex",document.getElementById("form-task-edit").addEventListener("submit",(t=>{t.preventDefault();const n=document.getElementById("task-name-edit"),s=document.getElementById("task-description-edit"),i=document.getElementById("task-date-edit"),l=document.getElementById("task-priority-edit");this.title=n.value,this.description=s.value,this.date=i.value,this.priority=l.value,e.style.display="none",d.renderTasks()}))}}(n.value,s.value,l.value,r.value);d.tasks.push(c),localStorage.setItem("list",JSON.stringify(c)),c.render()})),n.renderProjects()})();