(()=>{"use strict";function e(e,t,n,s){const l=document.createElement(e);return t&&(l.id=t),n&&n.forEach((e=>l.classList.add(e))),s&&(l.innerText=s),l}function t(){return Math.random().toString().split(".").join("")}const n=document.querySelector("#projects .card");class s{constructor(e){this.title=e,this.id=t(),this.tasks=[]}render(){const t=e("div",this.id,["project"],null),s=e("p",null,null,this.title),l=e("img",null,["delete"],null);l.src="./img/delete.svg",l.addEventListener("click",(()=>{this.delete()})),t.appendChild(s),t.appendChild(l),n.appendChild(t),t.addEventListener("click",(()=>{d=this,d.active=!1,this.renderTasks(),document.querySelectorAll(".project").forEach((e=>e.classList.value="project")),document.querySelectorAll(".delete").forEach((e=>e.src="./img/delete.svg")),t.classList.value.includes("active")||(t.classList.add("active"),l.src="./img/delete-white.svg")}))}delete(){l=l.filter((e=>e.id!==this.id)),s.renderProjects()}renderTasks(){document.querySelector("#task-container").innerHTML="",this.tasks.forEach((e=>e.render()))}static renderProjects(){n.innerHTML="",l.forEach((e=>e.render()))}static setCurrentProject(e){d=e}}let l=[new s("Test Project")],d=l[0];const i=document.querySelector("#task-container");class r{constructor(e,n,s){this.name=e,this.date=n,this.priority=s,this.id=t()}render(){const t=e("div",this.id,["task"],null),n=e("div",null,["task-name"],null),s=e("input",null,["checkbox"],null);s.type="checkbox";const l=e("p",null,null,this.name),d=e("div",null,["task-info"],null),r=e("p",null,null,this.date),a=e("div",null,["badge"],this.priority),c=e("img",null,["delete"],null);c.src="./img/delete.svg";const o=e("img",null,["edit"],null);o.src="./img/edit.svg",o.addEventListener("click",(()=>{this.edit()})),n.appendChild(s),n.appendChild(l),d.appendChild(r),d.appendChild(a),d.appendChild(c),d.appendChild(o),t.appendChild(n),t.appendChild(d),i.appendChild(t),s.addEventListener("change",(()=>{l.classList.toggle("done")})),"urgent"===this.priority&&a.classList.add("urgent"),c.addEventListener("click",(()=>{this.delete()}))}delete(){d.tasks=d.tasks.filter((e=>e.id!==this.id)),d.renderTasks()}edit(){const e=document.getElementById("myModal");e.style.display="flex",document.getElementById("form-task-edit").addEventListener("submit",(t=>{t.preventDefault();const n=document.getElementById("task-name-edit");if(""===n.value)return void alert("The task must have a name");const s=document.getElementById("task-date-edit");if(""===s.value)return void alert("Please choose a deadline");const l=document.getElementById("task-priority-edit");this.name=n.value,this.date=s.value,this.priority=l.value,e.style.display="none",d.renderTasks()}))}}document.getElementById("form-project").addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("project-name");if(""===t.value)return void alert("The project must have a name");const n=new s(t.value);l.push(n),t.value="",s.renderProjects(),s.setCurrentProject(n);let d=document.querySelectorAll(".project");d[d.length-1].classList.add("active"),d[d.length-1].lastChild.src="./img/delete-white.svg"})),document.getElementById("form-task").addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("task-name");if(""===t.value)return void alert("The task must have a name");const n=document.getElementById("task-date");if(""===n.value)return void alert("Please choose a deadline");const s=document.getElementById("task-priority"),l=new r(t.value,n.value,s.value);d.tasks.push(l),localStorage.setItem("list",JSON.stringify(l)),l.render()})),JSON.parse(localStorage.getItem("task")),s.renderProjects();const a=prompt("what's your first name?");document.querySelector(".user-name").innerText=a||"User"})();