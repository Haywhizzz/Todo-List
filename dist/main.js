(()=>{"use strict";function e(e,t,n,s){const i=document.createElement(e);return t&&(i.id=t),n&&n.forEach((e=>i.classList.add(e))),s&&(i.innerText=s),i}function t(){return Math.random().toString().split(".").join("")}const n=document.querySelector("#projects .card");class s{constructor(e){this.title=e,this.id=t(),this.tasks=[]}render(){const t=e("div",this.id,["project"],null),s=e("p",null,null,this.title),i=e("img",null,["delete"],null);i.src="./img/delete.svg",i.addEventListener("click",(()=>{this.delete()})),t.appendChild(s),t.appendChild(i),n.appendChild(t),t.addEventListener("click",(()=>{d=this,d.active=!1,this.renderTasks(),document.querySelectorAll(".project").forEach((e=>{e.classList.value="project"})),document.querySelectorAll(".delete").forEach((e=>{e.src="./img/delete.svg"})),t.classList.value.includes("active")||(t.classList.add("active"),i.src="./img/delete-white.svg")}))}delete(){i=i.filter((e=>e.id!==this.id)),s.renderProjects()}renderTasks(){document.querySelector("#task-container").innerHTML="",this.tasks.forEach((e=>e.render()))}static renderProjects(){n.innerHTML="",i.forEach((e=>e.render()))}static setCurrentProject(e){d=e}}let i=[new s("Test Project")],d=i[0];const l=document.querySelector("#task-container"),r=document.getElementById("form-project"),a=document.querySelector(".feedback"),c=(e,t)=>{a.classList.add("showItem",`alert-${t}`),a.innerHTML=`<p>${e}</p>`,setTimeout((()=>{a.classList.remove("showItem",`alert-${t}`)}),3e3)};r.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("project-name");if(""===t.value)return void c("project title cannot be empty","danger");const n=new s(t.value);i.push(n),t.value="",s.renderProjects(),s.setCurrentProject(n);const d=document.querySelectorAll(".project");d[d.length-1].classList.add("active"),d[d.length-1].lastChild.src="./img/delete-white.svg"})),document.getElementById("form-task").addEventListener("submit",(n=>{n.preventDefault();const s=document.getElementById("task-name");if(""===s.value)return void c("task-title cannot be empty","danger");const i=document.getElementById("task-description");if(""===i.value)return void c("task-description cannot be empty","danger");const r=document.getElementById("task-date");if(""===r.value)return void c("Please choose a deadline","danger");const a=document.getElementById("task-priority"),o=new class{constructor(e,n,s,i){this.title=e,this.description=n,this.date=s,this.priority=i,this.id=t()}render(){const t=e("div",this.id,["task"],null),n=e("div",null,["task-name"],null),s=e("div",null,["task-descrption"],null),i=e("input",null,["checkbox"],null);i.type="checkbox";const d=e("p",null,null,this.title),r=e("p",null,null,this.description),a=e("div",null,["task-info"],null),c=e("p",null,null,this.date),o=e("div",null,["badge"],this.priority),u=e("img",null,["delete"],null);u.src="./img/delete.svg";const p=e("img",null,["edit"],null);p.src="./img/edit.svg",p.addEventListener("click",(()=>{this.edit()})),n.appendChild(i),n.appendChild(d),s.appendChild(i),s.appendChild(r),a.appendChild(c),a.appendChild(o),a.appendChild(u),a.appendChild(p),t.appendChild(n),t.appendChild(s),t.appendChild(a),l.appendChild(t),i.addEventListener("change",(()=>{d.classList.toggle("done")})),l.appendChild(t),i.addEventListener("change",(()=>{r.classList.toggle("done")})),"urgent"===this.priority&&o.classList.add("urgent"),u.addEventListener("click",(()=>{this.delete()}))}delete(){d.tasks=d.tasks.filter((e=>e.id!==this.id)),d.renderTasks()}edit(){const e=document.getElementById("myModal");e.style.display="flex",document.getElementById("form-task-edit").addEventListener("submit",(t=>{t.preventDefault();const n=document.getElementById("task-name-edit"),s=document.getElementById("task-description-edit"),i=document.getElementById("task-date-edit"),l=document.getElementById("task-priority-edit");this.title=n.value,this.description=s.value,this.date=i.value,this.priority=l.value,e.style.display="none",d.renderTasks()}))}}(s.value,i.value,r.value,a.value);d.tasks.push(o),localStorage.setItem("list",JSON.stringify(o)),o.render()})),s.renderProjects();const o=prompt("what's your first name?");document.querySelector(".user-name").innerText=o||"User"})();