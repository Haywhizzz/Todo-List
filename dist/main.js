(()=>{"use strict";function e(e,t,n,d){const i=document.createElement(e);return t&&(i.id=t),n&&n.forEach((e=>i.classList.add(e))),d&&(i.innerText=d),i}function t(){return Math.random().toString().split(".").join("")}const n=document.querySelector("#projects .card");class d{constructor(e){this.title=e,this.id=t(),this.tasks=[]}render(){const t=e("div",this.id,["project"],null),d=e("p",null,null,this.title),i=e("img",null,["delete"],null);i.src="./img/delete.svg",i.addEventListener("click",(()=>{this.delete()})),t.appendChild(d),t.appendChild(i),n.appendChild(t),t.addEventListener("click",(()=>{s=this,s.active=!1,this.renderTasks(),document.querySelectorAll(".project").forEach((e=>{e.classList.value="project"})),document.querySelectorAll(".delete").forEach((e=>{e.src="./img/delete.svg"})),t.classList.value.includes("active")||(t.classList.add("active"),i.src="./img/delete-white.svg")}))}delete(){i=i.filter((e=>e.id!==this.id)),d.renderProjects()}renderTasks(){document.querySelector("#task-container").innerHTML="",this.tasks.forEach((e=>e.render()))}static renderProjects(){n.innerHTML="",i.forEach((e=>e.render()))}static setCurrentProject(e){s=e}}let i=[new d("Test Project")],s=i[0];const l=document.querySelector("#task-container"),r=document.getElementById("form-project"),a=document.querySelector(".feedback"),c=(e,t)=>{a.classList.add("showItem",`alert-${t}`),a.innerHTML=`<p>${e}</p>`,setTimeout((()=>{a.classList.remove("showItem",`alert-${t}`)}),3e3)};r.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("project-name");if(""===t.value)return void c("project title cannot be empty","danger");const n=new d(t.value);i.push(n),t.value="",d.renderProjects(),d.setCurrentProject(n);const s=document.querySelectorAll(".project");s[s.length-1].classList.add("active"),s[s.length-1].lastChild.src="./img/delete-white.svg"})),document.getElementById("form-task").addEventListener("submit",(n=>{n.preventDefault();const d=document.getElementById("task-name");if(""===d.value)return void c("task-title cannot be empty","danger");const i=document.getElementById("task-description");if(""===i.value)return void c("task-description cannot be empty","danger");const r=document.getElementById("task-date");if(""===r.value)return void c("Please choose a deadline","danger");const a=document.getElementById("task-priority"),o=new class{constructor(e,n,d,i){this.title=e,this.description=n,this.date=d,this.priority=i,this.id=t()}render(){const t=e("div",this.id,["task"],null),n=e("div",null,["task-name"],null),d=e("div",null,["task-descrption"],null),i=e("input",null,["checkbox"],null);i.type="checkbox";const s=e("p",null,null,this.title),r=e("p",null,null,this.description),a=e("div",null,["task-info"],null),c=e("p",null,null,this.date),o=e("div",null,["badge"],this.priority),u=e("img",null,["delete"],null);u.src="./img/delete.svg";const p=e("img",null,["edit"],null);p.src="./img/edit.svg",p.addEventListener("click",(()=>{this.edit()})),n.appendChild(i),n.appendChild(s),d.appendChild(i),d.appendChild(r),a.appendChild(c),a.appendChild(o),a.appendChild(u),a.appendChild(p),t.appendChild(n),t.appendChild(d),t.appendChild(a),l.appendChild(t),i.addEventListener("change",(()=>{s.classList.toggle("done")})),l.appendChild(t),i.addEventListener("change",(()=>{r.classList.toggle("done")})),"urgent"===this.priority&&o.classList.add("urgent"),u.addEventListener("click",(()=>{this.delete()}))}delete(){s.tasks=s.tasks.filter((e=>e.id!==this.id)),s.renderTasks()}edit(){const e=document.getElementById("myModal");e.style.display="flex",document.getElementById("form-task-edit").addEventListener("submit",(t=>{t.preventDefault();const n=document.getElementById("task-name-edit"),d=document.getElementById("task-description-edit"),i=document.getElementById("task-date-edit"),l=document.getElementById("task-priority-edit");this.title=n.value,this.description=d.value,this.date=i.value,this.priority=l.value,e.style.display="none",s.renderTasks()}))}}(d.value,i.value,r.value,a.value);s.tasks.push(o),localStorage.setItem("list",JSON.stringify(o)),o.render()})),d.renderProjects()})();